<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--- TODO: Add a Favicon --->
    <link rel="shortcut icon" href="files/favicon.png" type="image/png" />
    <link rel="stylesheet" type="text/css" href="main.css">
    <link rel="stylesheet" type="text/css" href="lightbox.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>

    <style type="text/css">
        h1 {
            font-family: Takagiwebfont;
            font-size: 65px;
        }

        p {
            font-family: Takagiwebfont;
        }

        @media screen and (max-width: 800px) {

            .game_title {
                top: 46%;
            }

            .game_descr {
                top: 58%;
            }

            h1 {
                font-size: 40px;
            }

            h2 {
                font-size: 20px;
            }
        }
    </style>
    <title> Teaser Takagi-san VN </title>

</head>

<body>

    <div class="parallax"></div>

    <div class="nav-container text_fade_in">
        <div class="nav">
            <ul>
                <li data-ref="home">Home</li>
                <li data-ref="about">About</li>
                <li data-ref="samples">Samples</li>
                <li data-ref="download"><a href="https://github.com">Download</a></li>
                <li data-ref="staff">Staff</li>
            </ul>
        </div>
    </div>

    <script>

        $(document).ready(function () {
            const ajaxElements = ["home", "about", "samples", "staff"]

            /* this is the fade in function for the Logo fade in effect */
            function fadeIn(obj) {
                $(obj).delay(800).fadeIn(1000);
            }

            // Actions for the navbar (AJAX call for every element, except Download, or the current selected one, to avoid reloading the same part again)
            $("[data-ref]").on("click", function () { // Selector "[data-ref]:not([data-status='selected'])" not working, so we check if it's selected later :(

                if ($(this).attr("data-status") !== "selected") {

                    // Change the selected element from the navbar visually

                    let mod = $(this).attr("data-ref")

                    if (ajaxElements.includes(mod)) {
                        $.ajax({
                            type: 'POST',
                            url: `${mod}.html`,
                            success: function (data) {

                                $(".nav li").attr("data-status", "iddle")
                                $(this).attr("data-status", "selected")
                                $(".parallax").html(data)

                                // Add events to elements, since when we modify the HTML, the events get lost
                                if (mod === "samples") {
                                    addEvents()
                                }
                                else if (mod === "home") {
                                    fadeIn("#preload")
                                }
                            },
                            error: function (request, error) {
                                // console.log("Request: " + JSON.stringify(request))
                                alert("There was an error with the server. Please try again later")
                            }
                        });
                    }
                    else if (mod === "downlaod") {
                    }
                }
            })

            $("[data-ref='home']").click()
        });
    </script>

    <script src="js/lightbox-plus-jquery.min.js"></script>

    <script>
        function addEvents() {

            // Prevent two audio file play at the same time
            document.addEventListener('play', function (e) {
                var audios = document.getElementsByTagName('audio');
                for (var i = 0, len = audios.length; i < len; i++) {
                    if (audios[i] != e.target) {
                        audios[i].pause();
                    }
                }
            }, true);
        }
    </script>

    <!--Lightbox script made by https://github.com/lokesh Thanks Lokesh!-->

    <noscript>Your browser does not support JavaScript!</noscript>

</body>

</html>